<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Display Data</title>
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/antd/4.16.13/antd.min.css">
    <style>
        .model-container {
            margin: 10px;
        }
    </style>
</head>
<body>
    <div>测试</div>
    <div id="searchContainer"></div>
    <div id="content"></div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/17.0.2/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/17.0.2/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/antd/4.16.13/antd.min.js"></script>
    <script>
        const { useState, useEffect } = React;
        const { Input, Card, Row, Col } = antd;

        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('service-worker.js')
                .then(() => console.log('Service Worker registered'))
                .catch(error => console.error('Service Worker registration failed:', error));
        }

        const App = () => {
            const [modelsData, setModelsData] = useState({});
            const [searchTerm, setSearchTerm] = useState('');

            useEffect(() => {
                const timestamp = new Date().getTime();
                fetch(`output/data.json?t=${timestamp}`, { cache: 'no-store' })
                    .then(
                        response => {
                            response.json()
                            debugger
                        }
                    )
                    .then(
                        data => {
                            setModelsData(data)
                            debugger
                        }
                    )
                    .catch(error => console.error('Error fetching data:', error));
            }, []);

            const filteredModels = Object.entries(modelsData).filter(([key]) =>
                key.toLowerCase().includes(searchTerm.toLowerCase())
            );

            return (
                <>
                    <Row gutter={[16, 16]}>
                        {filteredModels.map(([key, modelData]) => (
                            key !== 'end' && (
                                <Col span={8} key={key}>
                                    <Card title={`Model: ${key}`} className="model-container">
                                        <p><strong>Path:</strong> {modelData.path}</p>
                                        <p><strong>Created Time:</strong> {modelData.created_time}</p>
                                        <pre>{JSON.stringify(modelData.content, null, 2)}</pre>
                                    </Card>
                                </Col>
                            )
                        ))}
                    </Row>
                </>
            );
        };

        ReactDOM.render(<App />, document.getElementById('content'));
    </script>
</body>
</html>
